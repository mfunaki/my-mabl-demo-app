# 指示: 操作手順書の作成

システムの操作手順書（ユーザーガイド）を作成してください。テストアーティファクト（スクリーンショット）と仕様書を参照し、エンドユーザーが実際に操作できる詳細な手順書を生成します。

## 参照ファイル

### 必須
* `/docs/spec-expense-app.md` - アプリケーション全体仕様
* `/docs/prompts/02-web.md` - Web仕様・data-testid一覧（Webアプリの場合）
* `/docs/prompts/03-mobile.md` - Mobile仕様・testID一覧（Mobileアプリの場合）

### オプション（存在する場合は参照）
* `/tests/artifacts/web/{テスト名}/screenshots/` - Webテストのスクリーンショット
* `/tests/artifacts/mobile/{テスト名}/screenshots/` - Mobileテストのスクリーンショット
* `/tests/steps/web/{テスト名}.csv` - Webテストのステップ定義
* `/tests/steps/mobile/{テスト名}.csv` - Mobileテストのステップ定義

---

## 作成する操作手順書

### 1. マネージャー経費承認フロー (`manager-expense-approval-guide.md`)

**自然言語プロンプト:**
```
経費管理システムにおいて、マネージャー（上司/管理者）がWebアプリケーションで
経費申請を承認するための操作手順書を作成してください。

テストアーティファクトのスクリーンショットを活用し、
実際の画面を見ながら操作できるガイドにしてください。
```

**対象ユーザー:**
- Manager（上司/管理者）

**対象アプリケーション:**
- Webアプリケーション（`http://localhost:3000` または本番URL）

**操作フロー:**
1. ログイン画面へアクセス
2. マネージャーとしてログイン（manager / manager123）
3. ダッシュボード画面の確認
4. 経費一覧の確認
5. 対象経費の特定（PENDING状態）
6. 経費の承認（承認ボタンクリック）
7. 承認結果の確認（APPROVED状態）
8. ログアウト

**使用するテストアーティファクト:**
- `/tests/artifacts/web/manager-expense-approval-flow/screenshots/`

---

### 2. 従業員経費申請フロー (`employee-expense-submission-guide.md`) ※作成予定

**自然言語プロンプト:**
```
経費管理システムにおいて、従業員がMobileアプリケーションで
経費を申請するための操作手順書を作成してください。
```

**対象ユーザー:**
- Employee（従業員）

**対象アプリケーション:**
- Mobileアプリケーション（Expo）

**操作フロー:**
1. アプリの起動
2. 従業員としてログイン（employee / employee123）
3. ホーム画面の確認
4. 新規経費申請フォームの入力
5. 申請の送信
6. 申請履歴の確認（PENDING状態）
7. ログアウト

---

## 出力フォーマット

各操作手順書は以下のセクションで構成してください：

### 必須セクション

```markdown
# {操作フロー名} 操作手順書

## 概要

本書は、{システム名}における{対象ユーザー}が{目的}するための操作手順を説明します。

### 対象ユーザー
- **{ユーザー種別}**: {説明}

### 前提条件
- {前提条件1}
- {前提条件2}
- ...

### 認証情報（デモ環境）
| ユーザー名 | パスワード |
|-----------|-----------|
| {username} | {password} |

---

## 操作手順

### Step 1: {ステップ名}

1. {操作1}
2. {操作2}
3. {操作3}

**確認ポイント:**
- {確認項目1}
- {確認項目2}

![{画面名}]({スクリーンショットのパス})

---

### Step 2: {ステップ名}
...

---

## 画面要素一覧

### {画面名} (`{パス}`)

| 要素 | 説明 | data-testid / testID |
|------|------|---------------------|
| {要素名} | {説明} | {ID} |
| ... | ... | ... |

---

## トラブルシューティング

### {問題カテゴリ}

| 症状 | 原因 | 対処方法 |
|------|------|----------|
| {症状} | {原因} | {対処} |
| ... | ... | ... |

---

## 関連ドキュメント

- [{ドキュメント名}]({パス})
- ...

---

## 改訂履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|----------|
| {日付} | 1.0 | 初版作成 |

---

*本手順書は、テストアーティファクト（スクリーンショット）と仕様書を元に自動生成されました。*
```

---

## スクリーンショットの活用

### スクリーンショット選択のガイドライン

テストアーティファクトから適切なスクリーンショットを選択してください：

1. **ログイン画面**: 入力フォームが空の状態
2. **認証情報入力後**: ユーザー名・パスワード入力済みの状態
3. **メイン画面**: データが表示されている状態
4. **操作前**: 操作対象が確認できる状態
5. **操作後**: 結果が反映された状態
6. **ログアウト後**: ログイン画面に戻った状態

### スクリーンショットの参照方法

```markdown
![{画面の説明}](../../tests/artifacts/{web|mobile}/{テスト名}/screenshots/{ファイル名}.png)
```

**パスの注意点:**
- 操作手順書は `/docs/operations/` に配置
- スクリーンショットは `/tests/artifacts/` に配置
- 相対パスで `../../tests/artifacts/...` と参照

---

## data-testid / testID の記載

### Web（02-web.mdから）

| 画面 | 要素 | data-testid |
|------|------|-------------|
| ログイン | タイトル | `login-title` |
| ログイン | ユーザー名入力欄 | `username-input` |
| ログイン | パスワード入力欄 | `password-input` |
| ログイン | ログインボタン | `login-button` |
| ダッシュボード | タイトル | `dashboard-title` |
| ダッシュボード | 経費行 | `expense-row-{id}` |
| ダッシュボード | 承認ボタン | `approve-button-{id}` |
| ダッシュボード | ログアウトボタン | `logout-button` |
| ダッシュボード | リセットボタン | `reset-button` |

### Mobile（03-mobile.mdから）

| 画面 | 要素 | testID |
|------|------|--------|
| ログイン | ユーザー名入力 | `username-input` |
| ログイン | パスワード入力 | `password-input` |
| ログイン | ログインボタン | `login-button` |
| ホーム | タイトル入力 | `title-input` |
| ホーム | 金額入力 | `amount-input` |
| ホーム | 申請ボタン | `submit-button` |
| ホーム | 経費項目 | `expense-item-{title}` |
| ホーム | ステータス | `expense-status-{id}` |

---

## 出力ファイル

以下のファイルを `/docs/operations/` ディレクトリに生成してください：

- `manager-expense-approval-guide.md` - マネージャー経費承認フロー操作手順書
- `employee-expense-submission-guide.md` - 従業員経費申請フロー操作手順書（予定）

---

## 出力言語

操作手順書はすべて**日本語**で記述してください。

- ステップの説明
- 確認ポイント
- トラブルシューティング
- すべてのセクションを日本語で出力

---

## 品質チェックリスト

作成した操作手順書が以下の基準を満たしているか確認してください：

### 内容の完全性
- [ ] すべての操作ステップが記載されている
- [ ] 各ステップに確認ポイントが含まれている
- [ ] 前提条件が明記されている
- [ ] 認証情報が記載されている（デモ環境用）

### スクリーンショット
- [ ] 主要な画面にスクリーンショットが配置されている
- [ ] スクリーンショットのパスが正しい（相対パス）
- [ ] スクリーンショットの説明が適切である

### 画面要素
- [ ] 画面要素一覧にdata-testid/testIDが記載されている
- [ ] 仕様書（02-web.md, 03-mobile.md）と整合している

### トラブルシューティング
- [ ] よくある問題と対処方法が記載されている
- [ ] 表形式で見やすく整理されている

### フォーマット
- [ ] マークダウンの書式が正しい
- [ ] 見出しレベルが適切である
- [ ] 表のフォーマットが統一されている
- [ ] 改訂履歴が記載されている

---

## 使用例

```bash
# Claude Codeでの実行例
claude "
/docs/prompts/05-operations-guide.md を参照して、
マネージャー経費承認フローの操作手順書を作成してください。
テストアーティファクトのスクリーンショットを活用し、
実際の画面を見ながら操作できるガイドにしてください。
出力先は /docs/operations/manager-expense-approval-guide.md です。
"
```

---

## 関連ファイル

- 出力先ディレクトリ: `/docs/operations/`
- アプリケーション仕様書: `/docs/spec-expense-app.md`
- Web仕様・data-testid: `/docs/prompts/02-web.md`
- Mobile仕様・testID: `/docs/prompts/03-mobile.md`
- テストアーティファクト: `/tests/artifacts/`

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-02-02 | 初版作成 |
