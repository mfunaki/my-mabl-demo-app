# マネージャー経費承認フロー 操作手順書

## 概要

本書は、経費管理システムにおけるマネージャー（上司/管理者）が経費申請を承認するための操作手順を説明します。

### 対象ユーザー
- **Manager（上司/管理者）**: Webアプリケーションを使用し、全社員の経費申請を閲覧・承認する権限を持つユーザー

### 前提条件
- Webブラウザ（Chrome、Firefox、Safari、Edge等）がインストールされていること
- システムのURL（`http://localhost:3000` または本番URL）にアクセスできること
- マネージャーアカウントの認証情報を持っていること

### 認証情報（デモ環境）
| ユーザー名 | パスワード |
|-----------|-----------|
| manager   | manager123 |

---

## 操作手順

### Step 1: ログイン画面へアクセス

1. Webブラウザを起動します
2. アドレスバーにシステムのURLを入力します
   - ローカル環境: `http://localhost:3000/login`
   - 本番環境: 管理者から提供されたURLの `/login`

3. ログイン画面が表示されることを確認します

**確認ポイント:**
- 画面タイトルが「**経費管理 - Manager Login**」と表示されている
- ユーザー名入力欄が表示されている
- パスワード入力欄が表示されている
- 「ログイン」ボタンが表示されている

![ログイン画面](../../tests/artifacts/web/manager-expense-approval-flow/screenshots/item_00028_step_4_2026-01-27T14-09-38Z.png)

---

### Step 2: マネージャーとしてログイン

1. **ユーザー名**欄に `manager` と入力します
2. **パスワード**欄に `manager123` と入力します
3. 「**ログイン**」ボタンをクリックします

**確認ポイント:**
- 入力中、パスワードは「●●●●●●●●●」のようにマスク表示される
- エラーメッセージが表示されないこと

![認証情報入力後](../../tests/artifacts/web/manager-expense-approval-flow/screenshots/item_00054_step_6.3_2026-01-27T14-09-50Z.png)

---

### Step 3: ダッシュボード画面の確認

ログイン成功後、自動的に経費承認ダッシュボードへ遷移します。

**確認ポイント:**
- 画面タイトルが「**経費承認ダッシュボード**」と表示されている
- 経費一覧テーブルが表示されている
- 以下の情報が表示されている：
  - **件数**: 申請総数と承認待ち件数
  - **合計**: 経費の合計金額

![ダッシュボード画面](../../tests/artifacts/web/manager-expense-approval-flow/screenshots/item_00061_step_7_2026-01-27T14-09-51Z.png)

---

### Step 4: 経費一覧の確認

経費一覧テーブルで、各申請の詳細を確認します。

**テーブル構成:**

| 列名 | 説明 |
|------|------|
| ID | 経費申請の識別番号 |
| タイトル | 経費の件名（例: Taxi, Conference） |
| 申請者 | 経費を申請した従業員名 |
| 金額 | 申請金額（円） |
| ステータス | PENDING（承認待ち）/ APPROVED（承認済）/ REJECTED（却下） |
| 申請日時 | 申請が行われた日時 |
| 操作 | 承認ボタン（PENDING状態の場合のみ表示） |

**ステータスの色分け:**
- 🟡 **PENDING** (黄色): 承認待ち
- 🟢 **APPROVED** (緑色): 承認済み
- 🔴 **REJECTED** (赤色): 却下

---

### Step 5: 対象経費の特定

承認対象の経費を一覧から見つけます。

1. 経費一覧テーブルをスクロールして確認します
2. 承認したい経費の行を特定します
3. ステータスが「**PENDING**」であることを確認します

**例: Conference経費の承認**
- タイトル: Conference
- 申請者: employee
- 金額: ¥5,000
- ステータス: PENDING

---

### Step 6: 経費の承認

1. 承認対象の経費行の右端にある「**承認**」ボタンを見つけます
2. 「**承認**」ボタンをクリックします
3. 確認ダイアログが表示されたら「**OK**」をクリックします

**確認ポイント:**
- 承認ボタンは緑色で表示されている
- ボタンがクリック可能な状態である

---

### Step 7: 承認結果の確認

承認処理が完了すると、画面が更新されます。

**確認ポイント:**
- 承認した経費のステータスが「**APPROVED**」（緑色）に変更されている
- 「承認」ボタンが非表示になっている（承認済みのため）
- 画面上部の「承認待ち件数」が1件減少している

---

### Step 8: ログアウト

作業完了後、システムからログアウトします。

1. 画面右上の「**ログアウト**」ボタンをクリックします
2. ログイン画面へ自動的に遷移します

**確認ポイント:**
- ログイン画面が再度表示されること
- URLが `/login` に変更されていること

![ログアウト後](../../tests/artifacts/web/manager-expense-approval-flow/screenshots/item_00216_step_29_2026-01-27T14-10-40Z.png)

---

## 画面要素一覧

### ログイン画面 (`/login`)

| 要素 | 説明 | data-testid |
|------|------|-------------|
| タイトル | 「経費管理 - Manager Login」 | login-title |
| ユーザー名入力欄 | マネージャーIDを入力 | username-input |
| パスワード入力欄 | パスワードを入力 | password-input |
| ログインボタン | 認証を実行 | login-button |

### ダッシュボード画面 (`/dashboard`)

| 要素 | 説明 | data-testid |
|------|------|-------------|
| タイトル | 「経費承認ダッシュボード」 | dashboard-title |
| 経費行 | 各経費申請の行 | expense-row-{id} |
| 承認ボタン | 経費を承認 | approve-button-{id} |
| ログアウトボタン | システムからログアウト | logout-button |
| 全データ削除ボタン | テストデータをリセット | reset-button |

---

## トラブルシューティング

### ログインできない場合

| 症状 | 原因 | 対処方法 |
|------|------|----------|
| エラーメッセージが表示される | ユーザー名またはパスワードが間違っている | 正しい認証情報を再入力する |
| 画面が表示されない | サーバーが起動していない | システム管理者に連絡する |
| ダッシュボードに遷移しない | ネットワーク接続の問題 | ブラウザを更新し再試行する |

### 承認ボタンが表示されない場合

| 症状 | 原因 | 対処方法 |
|------|------|----------|
| 承認ボタンがない | 既に承認済みまたは却下済み | ステータスを確認する |
| 操作列が空 | 権限がない | マネージャーアカウントでログインしているか確認 |

### 承認が反映されない場合

1. ブラウザの更新ボタン（F5キー）を押して画面を再読み込みします
2. それでも反映されない場合は、一度ログアウトして再度ログインします

---

## 関連ドキュメント

- [アプリケーション仕様書](../spec-expense-app.md)
- [従業員向け経費申請手順書](./employee-expense-submission-guide.md) ※作成予定
- [システム管理者向けガイド](./admin-guide.md) ※作成予定

---

## 改訂履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|----------|
| 2026-01-28 | 1.0 | 初版作成 |

---

*本手順書は、テストアーティファクト（スクリーンショット）と仕様書を元に自動生成されました。*
